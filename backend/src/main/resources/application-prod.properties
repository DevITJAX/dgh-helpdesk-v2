# Production Profile Configuration
# This profile enables LDAP authentication and production settings

# Enable LDAP for production
spring.ldap.enabled=true

# LDAP Configuration for Azure Windows Server (DGH-DATA)
# These will be overridden by environment variables in production
ldap.server.url=${LDAP_SERVER_URL:ldap://135.232.121.145:389}
ldap.server.domain=${LDAP_SERVER_DOMAIN:dgh.local}
ldap.server.bind.user=${LDAP_SERVER_BIND_USER:CN=adminuser,CN=Users,DC=dgh,DC=local}
ldap.server.bind.password=${LDAP_SERVER_BIND_PASSWORD:Admin@2025!Complex123XYZ}
ldap.server.search.base=${LDAP_SERVER_SEARCH_BASE:CN=Users,DC=dgh,DC=local}

# Production logging with LDAP debugging
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.ldap=DEBUG
logging.level.ma.gov.dgh.helpdesk=DEBUG
logging.level.ma.gov.dgh.helpdesk.security=DEBUG

logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# Production-specific settings
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Network Discovery Configuration (enabled for production)
network.discovery.enabled=true

# Security settings for production - HTTP + same-origin proxy
# Use Lax so cookie is accepted without Secure (Chrome blocks None without Secure)
server.servlet.session.cookie.same-site=Lax
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.http-only=true
server.servlet.session.timeout=8h
server.servlet.session.tracking-modes=cookie
server.servlet.session.cookie.domain=
server.servlet.session.cookie.path=/
server.servlet.session.cookie.max-age=28800

# JWT Settings for production (should be externalized)
app.jwtSecret=${JWT_SECRET:dgh-helpdesk-production-jwt-secret-key-2024-secure-and-long-enough-for-hs512}
app.jwtExpirationInMs=86400000 